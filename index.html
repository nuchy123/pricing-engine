<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mortgage Pricing Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* small, namespaced tweaks so we don't fight your existing CSS */
    .mph-shell {
      max-width: 1100px;
      margin: 40px auto;
      padding: 0 16px 40px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .mph-header {
      margin-bottom: 24px;
    }
    .mph-header h1 {
      font-size: 26px;
      margin: 0 0 4px;
    }
    .mph-main {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 24px;
    }
    @media (max-width: 900px) {
      .mph-main {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .mph-card {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      padding: 20px 22px 24px;
    }
    .mph-card h2 {
      font-size: 18px;
      margin: 0 0 16px;
    }
    .mph-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px 18px;
    }
    .mph-field {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }
    .mph-field label {
      font-weight: 500;
    }
    .mph-input,
    .mph-select {
      border-radius: 8px;
      border: 1px solid #d1d5db;
      padding: 7px 10px;
      font-size: 14px;
      width: 100%;
      box-sizing: border-box;
    }
    .mph-input:focus,
    .mph-select:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 1px #2563eb22;
    }
    .mph-actions {
      margin-top: 20px;
      display: flex;
      justify-content: flex-start;
    }
    .mph-btn-primary {
      background: #2563eb;
      color: #fff;
      border: none;
      border-radius: 9999px;
      padding: 10px 26px;
      font-size: 15px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .mph-btn-primary:hover {
      background: #1d4ed8;
    }
    .mph-pill {
      border-radius: 9999px;
      padding: 4px 10px;
      font-size: 11px;
      display: inline-block;
      background: #eff6ff;
      color: #1d4ed8;
      margin-left: 6px;
    }
    .mph-note {
      font-size: 11px;
      color: #6b7280;
      margin-top: 8px;
    }
    .mph-result-header {
      font-size: 13px;
      margin-bottom: 8px;
      color: #4b5563;
    }
    .mph-result-rate {
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .mph-result-sub {
      font-size: 12px;
      color: #4b5563;
      margin-bottom: 16px;
    }
    .mph-result-row {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      margin-bottom: 4px;
    }
    .mph-tag-pill {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 9999px;
      background: #f3f4f6;
      margin-left: 4px;
    }
    .mph-small {
      font-size: 11px;
      color: #6b7280;
    }
    .mph-alert {
      margin-top: 10px;
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 8px;
      background: #fef2f2;
      color: #b91c1c;
      border: 1px solid #fecaca;
    }
    .mph-success {
      margin-top: 10px;
      font-size: 11px;
      color: #059669;
    }
    .mph-admin-link {
      font-size: 11px;
      margin-top: 14px;
      text-align: right;
      color: #6b7280;
    }
    .mph-admin-link a {
      color: #2563eb;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div class="mph-shell">
    <header class="mph-header">
      <h1>Mortgage Pricing Hub</h1>
      <div style="font-size: 12px; color: #6b7280;">
        Simple, user-friendly pricing: only note rate &amp; monthly P&amp;I shown to the front end.
      </div>
    </header>

    <main class="mph-main">
      <!-- LEFT: Scenario -->
      <section class="mph-card">
        <h2>Scenario Details</h2>

        <div class="mph-grid">
          <div class="mph-field">
            <label for="programSelect">
              Program
            </label>
            <select id="programSelect" class="mph-select">
              <!-- options filled by JS, but we also set safe defaults -->
              <option value="conventional">Conventional</option>
              <option value="fha">FHA</option>
              <option value="homestyle">Homestyle</option>
              <option value="homeready">HomeReady</option>
              <option value="nonqm">Non QM</option>
            </select>
          </div>

          <div class="mph-field">
            <label for="productTerm">
              Term <span class="mph-pill">Auto from rate sheet</span>
            </label>
            <select id="productTerm" class="mph-select">
              <!-- JS will override, but we render safe defaults so the dropdown is never empty -->
              <option value="30yr">30 Year Fixed</option>
              <option value="25yr">25 Year Fixed</option>
              <option value="20yr">20 Year Fixed</option>
              <option value="15yr">15 Year Fixed</option>
              <option value="10yr">10 Year Fixed</option>
              <option value="arm">ARM</option>
            </select>
          </div>

          <div class="mph-field">
            <label for="lockDays">
              Lock Term
            </label>
            <select id="lockDays" class="mph-select">
              <option value="30">30 Days</option>
              <option value="45">45 Days</option>
              <option value="60">60 Days</option>
            </select>
          </div>

          <div class="mph-field">
            <label for="occupancy">Occupancy</label>
            <select id="occupancy" class="mph-select">
              <option value="Primary Residence">Primary Residence</option>
              <option value="Second Home">Second Home</option>
              <option value="Investment">Investment Property</option>
            </select>
          </div>

          <div class="mph-field">
            <label for="propertyType">Property Type</label>
            <select id="propertyType" class="mph-select">
              <option value="Single Family / PUD">Single Family / PUD</option>
              <option value="2-4 Units">2-4 Units</option>
              <option value="Condo">Condo</option>
              <option value="Co-op">Co-op</option>
            </select>
          </div>

          <div class="mph-field">
            <label for="fico">
              FICO Score
            </label>
            <select id="fico" class="mph-select">
              <option value="780+">780+</option>
              <option value="760-779">760-779</option>
              <option value="740-759">740-759</option>
              <option value="720-739">720-739</option>
              <option value="700-719">700-719</option>
              <option value="680-699">680-699</option>
              <option value="660-679">660-679</option>
              <option value="640-659">640-659</option>
              <option value="<640">&lt;640</option>
            </select>
          </div>

          <div class="mph-field">
            <label for="loanPurpose">Loan Purpose</label>
            <select id="loanPurpose" class="mph-select">
              <option value="Purchase">Purchase</option>
              <option value="Rate/Term Refi">Rate/Term Refi</option>
              <option value="Cash-Out Refi">Cash-Out Refi</option>
            </select>
          </div>

          <div class="mph-field">
            <label for="zip">ZIP Code</label>
            <input id="zip" class="mph-input" type="text" placeholder="e.g. 11230" />
          </div>

          <div class="mph-field">
            <label for="location">Location (auto)</label>
            <input id="location" class="mph-input" type="text" placeholder="City, State" readonly />
          </div>

          <div class="mph-field">
            <label for="purchasePrice">Purchase Price</label>
            <input id="purchasePrice" class="mph-input" type="number" placeholder="e.g. 700000" />
          </div>

          <div class="mph-field">
            <label for="loanAmount">Loan Amount</label>
            <input id="loanAmount" class="mph-input" type="number" placeholder="Auto if PP + LTV entered" />
          </div>

          <div class="mph-field">
            <label for="ltv">
              LTV (%)
            </label>
            <input id="ltv" class="mph-input" type="number" placeholder="Auto if PP + Loan entered" />
          </div>
        </div>

        <div class="mph-note">
          Either enter <strong>Purchase Price + Loan Amount</strong> and LTV will auto-fill,
          or <strong>Purchase Price + LTV</strong> and Loan Amount will auto-fill.
        </div>

        <div class="mph-actions">
          <button id="getPricing" class="mph-btn-primary">
            Get Pricing
          </button>
        </div>

        <div id="frontStatus" class="mph-success"></div>
      </section>

      <!-- RIGHT: Pricing -->
      <section class="mph-card">
        <h2>Pricing Result</h2>

        <div id="pricingPanel">
          <div class="mph-result-header">
            We only show the <strong>note rate</strong> and
            <strong> principal &amp; interest payment</strong>.
            All LLPA, payup incentives and broker comp are applied internally.
          </div>

          <div id="noScenario" class="mph-small">
            No scenario calculated yet. Fill in the form and click <strong>Get Pricing</strong>.
          </div>

          <div id="pricingResult" style="display:none;">
            <div class="mph-result-rate" id="resultRate"></div>
            <div class="mph-result-sub" id="resultPmt"></div>

            <div class="mph-result-row">
              <span>Selected Program</span>
              <span id="resultProgram"></span>
            </div>
            <div class="mph-result-row">
              <span>Term</span>
              <span id="resultTerm"></span>
            </div>
            <div class="mph-result-row">
              <span>Base price</span>
              <span id="resultBasePrice"></span>
            </div>
            <div class="mph-result-row">
              <span>Broker comp <span class="mph-tag-pill">+2.50%</span></span>
              <span id="resultBrokerComp"></span>
            </div>
            <div class="mph-result-row">
              <span>Final internal price</span>
              <span id="resultFinalPrice"></span>
            </div>

            <div class="mph-small" style="margin-top:12px;">
              Taxes, insurance, HOA dues and mortgage insurance are not included in this payment estimate.
            </div>
          </div>

          <div id="pricingError" class="mph-alert" style="display:none;"></div>
        </div>

        <div class="mph-admin-link">
          Admin uploads are managed separately in
          <a href="admin.html">Admin XLS Upload</a>.
        </div>
      </section>
    </main>
  </div>

  <script src="pricing-engine.js"></script>
</body>
</html>
